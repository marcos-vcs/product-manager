<div class="container-fluid">

  <div class="row" *ngIf="!notFoundMessage && !loadState">
    <div class="col-12">
      <button (click)="confirmDeleteAll()" mat-flat-button class="bg-delete-all py-2 px-2 float-right">
        <img src="../../../assets/delete.png" class="mr-2" alt="delete all image" width="30">
        <span class="allProducts">Limpar lixeira</span>
      </button>
      <button (click)="confirmRestoreAll()" mat-flat-button class="bg-restore-all py-2 px-2 mr-2 float-right">
        <img src="../../../assets/restore.png" class="mr-2" alt="restore all image" width="30">
        <span class="allProducts">Restaurar todos</span>
      </button>
    </div>
  </div>

  <div *ngIf="loadState" class="row justify-content-center mt-5">
    <div class="col-lg-10 mt-5">
      <mat-spinner class="mx-auto"></mat-spinner>
    </div>
  </div>

  <div *ngIf="notFoundMessage && !loadState" class="row justify-content-center">
    <div class="col-lg-10 mt-5 center text-center not-found">
      <div>
        <img src="../../../assets/empty-trash.png" width="300" loading="lazy" alt="nenhum produto encontrado!">
      </div>
      Lixeira vazia!
    </div>
  </div>


  <div class="row mt-4 center" *ngIf="products.length > 0 && !loadState">
    <div class="card card-config ml-4 mb-4" *ngFor="let product of products" (click)="openBottomSheet(product)">
        <img
        class="card-img-top"
        [src]="product.url"
        onerror="this.onerror=null;this.src='../../../assets/not-found-product-image.png'"
        width="100%"
        height="150px"
        alt="imagem do card">

        <div class="card-body text-config">
          <h5 class="card-title">{{product.name | titlecase}}</h5>
              <p class="card-text">{{product.supplier.name | titlecase}}</p>
              <p class="card-text">
                <span *ngIf="product.quantity > 0">
                  {{product.quantity}} em Estoque
                </span>
                <span *ngIf="product.quantity <= 0">
                  Nenhum em Estoque
                </span>
              </p>
              <p class="card-text">{{product.price | currency : 'BRL'}}</p>
        </div>
    </div>
  </div>

  <div class="row" *ngIf="loadMore">
    <div class="col-12">
      <mat-spinner class="mx-auto"></mat-spinner>
    </div>
  </div>
  <div class="row" *ngIf="products.length > 0">
    <div class="col mt-3 mb-5 ml-4">

      <button
        (click)="load()"
        *ngIf="products.length < max && products.length !== 0 && !search"
        type="button"
        class="btn btn-primary see-more">
          Veja mais
      </button>

      <button
        (click)="loadFind()"
        *ngIf="products.length < max && products.length !== 0 && search"
        type="button"
        class="btn btn-primary see-more">
          Veja mais
      </button>

    </div>
  </div>

  <div class="row text-center w-100 mb-3">
    <div class="col">
      <span *ngIf="products.length === max && !loadState && !notFoundMessage" class="allProducts">
        Todos os produtos foram carregados!
      </span>
    </div>
  </div>
</div>
